{"version":3,"sources":["quiz_model.ts","course_model.ts","quiz_preview.tsx","interactive_board.tsx","quiz_view.tsx","course_view.tsx","reportWebVitals.ts","index.tsx"],"names":["viennaGambitAcceptedQuiz","name","initialPosition","questions","prompt","correctMove","from","to","response","nextMove","ViennaGameCourse","lines","QuizPreview","props","scorePromptClassName","score","quiz","length","scorePrompt","className","onClick","darkSquareStyle","backgroundColor","lightSquareStyle","position","width","draggable","Chess","ChessJS","moveHighlightColor","pieceHighlightColor","InteractiveBoard","useState","dropSquareStyle","squareStyles","pieceSquare","boardState","setBoardState","getHistory","game","history","verbose","highlightMovesFromSquare","state","square","movesFromSquare","moves","squaresToHighlight","highlightMoves","map","piece","get","reduce","a","boxShadow","borderRadius","backgroundImage","highlightSquares","getSquareStyles","mergeSquareStyles","Object","keys","key","hasOwnProperty","styleSquaresAndHighlight","m","getStateAfterMove","move","onValidMove","fen","Math","min","window","innerWidth","innerHeight","onDrop","sourceSquare","targetSquare","promotion","onMouseOverSquare","onMouseOutSquare","_square","boardStyle","fontFamily","onDragOverSquare","newState","oldState","onSquareClick","onSquareRightClick","defaultProps","QuizState","highlightStyle","getPrompt","title","message","AskQuestion","questionNumber","IncorrectResponse","CorrectResponse","QuizView","onFinishQuiz","setPosition","useReducer","num","incrementQuestionNumBy","useEffect","document","oldPrompts","newPrompt","prompts","addPrompt","AwaitingMove","quizState","setQuizState","current","incrementScore","gotQuestionWrong","setGotQuestionWrong","list","getElementById","scrollTop","scrollHeight","style","pointerEvents","newPosition","question","lastMove","Complete","Next","Retry","id","undo","CourseView","course","setQuiz","keyForQuiz","finalScore","localStorage","setItem","toString","scoreForQuiz","scoreString","getItem","parseInt","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.7c2fa3b5.chunk.js","sourcesContent":["import * as ChessJS from \"chess.js\"\n\nexport interface QuizQuestion {\n    prompt: string,\n    correctMove: ChessJS.ShortMove,\n    response: string,\n    nextMove: ChessJS.ShortMove,\n}\n\nexport interface QuizModel {\n     /** FEN of the  starting position for this line */ \n    initialPosition: string,\n    /** A sequence of questions to ask about the position */\n    questions: QuizQuestion[],\n    /** the name of this quiz */\n    name: string\n}\n\nexport const viennaGambitAcceptedQuiz: QuizModel = {\n    name: \"Vienna Gambit Accepted\",\n    initialPosition: \"rnbqkb1r/pppp1ppp/5n2/4p3/4P3/2N5/PPPP1PPP/R1BQKBNR w KQkq - 2 3\",\n    questions: [\n        {\n            prompt: \"The Vienna Gambit begins with what move in this position?\",\n            correctMove: { from: \"f2\", to: \"f4\" },\n            response: \"White gambits the f pawn\",\n            nextMove: { from: \"e5\", to: \"f4\" }\n        },\n        {\n            prompt: \"Suppose black accepts the gambit, what is white's best response? (Hint: why is this position better than the King's Gambit?)\",\n            correctMove: { from: \"e4\", to: \"e5\", },\n            response: \"White takes space in the centre while gaining tempo by attacking the knight. Note that the knight cannot move forward.\",\n            nextMove: { from: \"d8\", to: \"e7\" }\n        },\n        {\n            prompt: \"Black could try and be clever, pinning your pawn. How can white maintain pressure on the knight?\",\n            correctMove: { from: \"d1\", to: \"e2\" },\n            response: \"This unpins the pawn while developing the queen. Black's knight must now retreat.\",\n            nextMove: { from: \"f6\", to: \"g8\" }\n        },\n        {\n            prompt: \"Now the knight has undeveloped, what's the most accurate continuation for white?\",\n            correctMove: { from: \"g1\", to: \"f3\" },\n            response: \"This defends against Qh4 check, which is particularly nasty because of the pawn on f4.\",\n            nextMove: { from: \"d7\", to: \"d6\" }\n        },\n        {\n            prompt: \"A common idea here is for black to attack your e pawn. How can white punish this?\",\n            correctMove: { from: \"c3\", to: \"d5\" },\n            response: \"This attacks both the queen and the c7 pawn. If the queen goes to e6, then we have a royal fork.\",\n            nextMove: { from: \"e7\", to: \"d7\" }\n        },\n        {\n            prompt: \"Suppose black's queen instead tries to maintain vision on the d7 pawn. Find the winning continuation.\",\n            correctMove: { from: \"d5\", to: \"c7\" },\n            response: \"This forks the king and rook, and the square is only defended by the queen.\",\n            nextMove: { from: \"d7\", to: \"c7\" }\n        },\n        {\n            prompt: \"Finally, what if the queen recaptures the knight?\",\n            correctMove: { from: \"e5\", to: \"d6\" },\n            response: \"This is a discover check that attacks both the king and queen. Black's position crumbles.\",\n            nextMove: { from: \"e7\", to: \"d7\" }\n        },\n    ]\n};\n\nexport const viennaGambitDeclinedNc6Quiz: QuizModel = {\n    name: \"Vienna Gambit Declined, 3...Nc6\",\n    initialPosition: \"r1bqkb1r/pppp1ppp/2n2n2/4p3/4PP2/2N5/PPPP2PP/R1BQKBNR w KQkq - 1 4\",\n    questions: [\n        {\n            prompt: \"At low levels, one common way to decline the gambit is with Nc3, but this is winning for white. Find the refutation.\",\n            correctMove: { from: \"f4\", to: \"e5\" },\n            response: \"White takes the pawn anyway.\",\n            nextMove: { from: \"c6\", to: \"e5\" }\n        },\n        {\n            prompt: \"Suppose black recaptures the pawn. What is the best continuation for white?\",\n            correctMove: { from: \"d2\", to: \"d4\", },\n            response: \"White puts two pawns in the centre while gaining tempo on the knight.\",\n            nextMove: { from: \"e5\", to: \"g6\" }\n        },\n        {\n            prompt: \"Finally, black's knight on e5 could retreat to g6 or c6. Either way, which move best preserves white's advantage?\",\n            correctMove: { from: \"e4\", to: \"e5\", },\n            response: \"White gains dominant central control and forces black's knight on f6 to retreat. This gives white a crushing advantage out of the opening.\",\n            nextMove: { from: \"e5\", to: \"g6\" }\n        },\n    ]\n};\n\nexport const viennaGambitDeclined3d6Quiz: QuizModel = {\n    name: \"Vienna Gambit Declined, 3...d6\",\n    initialPosition: \"rnbqkb1r/ppp2ppp/3p1n2/4p3/4PP2/2N5/PPPP2PP/R1BQKBNR w KQkq - 0 4\",\n    questions: [\n        {\n            prompt: \"Another common idea is to defend the e-pawn by moving the d-pawn, but this is passive as it blocks in their dark-squared bishop. How should white develop?\",\n            correctMove: { from: \"g1\", to: \"f3\" },\n            response: \"This is the most flexible developing move - we don't want to develop the bishop yet.\",\n            nextMove: { from: \"b8\", to: \"c6\" }\n        },\n        {\n            prompt: \"If black's knight comes to c6, how should white continue developing? (Hint: why did we delay developing the light-squared bishop?)\",\n            correctMove: { from: \"f1\", to: \"b5\", },\n            response: \"Pinning the knight applies the most pressure to black's centre.\",\n            nextMove: { from: \"c8\", to: \"d7\" }\n        },\n        {\n            prompt: \"Black may decide to unpin their knight. How should white continue? (Hint: we don't need to rush to recapture the knight.\",\n            correctMove: { from: \"d2\", to: \"d3\", },\n            response: \"White creates a central pawn chain without blocking in their (already developed) light-squared bishop. White has a slight edge here. From here, black could take the f-pawn, in which case you should recapture with the bishop. Otherwise you can look to take their knight, then open up the position with fxe5.\",\n            nextMove: { from: \"e5\", to: \"g6\" }\n        },\n    ]\n};\n\nexport const viennaGambitMainLineIntroQuiz: QuizModel = {\n    name: \"Vienna Gambit, Main Line (Intro)\",\n    initialPosition: \"rnbqkb1r/ppp2ppp/5n2/3pp3/4PP2/2N5/PPPP2PP/R1BQKBNR w KQkq d6 0 4\",\n    questions: [\n        {\n            prompt: \"The best way for black to try and equalise is to counter-gambit their d-pawn. How should white respond?\",\n            correctMove: { from: \"f4\", to: \"e5\" },\n            response: \"This attacks black's knight, and there is only one correct response for black here.\",\n            nextMove: { from: \"f6\", to: \"e4\" }\n        },\n        {\n            prompt: \"Black should capture your pawn on e4. There are 3 possible responses here from white: d3, Nf3, and which other move?\",\n            correctMove: { from: \"d1\", to: \"f3\", },\n            response: \"This has recently become regarded as the main line and white's best chance for an advantage, but this position is considered equal. Black has 3 responses which will be covered in future quizzes.\",\n            nextMove: { from: \"c8\", to: \"c7\" }\n        },\n    ]\n};\n\nexport const viennaGambitMainLineNxc3Quiz: QuizModel = {\n    name: \"Vienna Gambit, Main Line 5...Nxc3\",\n    initialPosition: \"rnbqkb1r/ppp2ppp/8/3pP3/8/2n2Q2/PPPP2PP/R1B1KBNR w KQkq - 0 6\",\n    questions: [\n        {\n            prompt: \"From the Main Line position in the previous quiz, one of black's most natural moves is to take your c3 knight. How should white respond?\",\n            correctMove: { from: \"b2\", to: \"c3\" },\n            response: \"If black plays a developing move, we can get a big centre with d4 and develop naturally (i.e. put our light-squared bishop on d3, put a knight on e2, castle). This may lead to a big king-side attack.\",\n            nextMove: { from: \"c7\", to: \"c5\" }\n        },\n        {\n            prompt: \"Alternatively, black may try and stifle natural development with c5. How can white respond?\",\n            correctMove: { from: \"f3\", to: \"g3\", },\n            response: \"This makes it difficult for black to develop the dark-squared bishop without losing material, and leaves their king somewhat stranded in the centre.\",\n            nextMove: { from: \"b8\", to: \"c6\" }\n        },\n        {\n            prompt: \"The most natural response for black is to try and develop the queenside knight. What is white's most flexible response?\",\n            correctMove: { from: \"g1\", to: \"f3\", },\n            response: \"While it is possible for black to equalise here, the lines are tricky to find (the engine says h5 and Qa5, really??). You'll mainly look to develop your bishop, get your rook to the open b-file and castle. Black's play is much less natural.\",\n            nextMove: { from: \"b8\", to: \"c6\" }\n        },\n    ]\n};","import { QuizModel, viennaGambitAcceptedQuiz, viennaGambitDeclined3d6Quiz, viennaGambitDeclinedNc6Quiz, viennaGambitMainLineIntroQuiz, viennaGambitMainLineNxc3Quiz } from \"./quiz_model\";\n\nexport interface CourseModel {\n    name: string,\n    initialPosition: string,\n    lines: QuizModel[]\n}\n\nexport const ViennaGameCourse: CourseModel = {\n    name: \"The Vienna Game\",\n    initialPosition: \"rnbqkbnr/pppp1ppp/8/4p3/4P3/2N5/PPPP1PPP/R1BQKBNR b KQkq - 1 2\",\n    lines: [viennaGambitAcceptedQuiz, viennaGambitDeclinedNc6Quiz, viennaGambitDeclined3d6Quiz, \n        viennaGambitMainLineIntroQuiz, viennaGambitMainLineNxc3Quiz]\n}","import Chessboard from \"chessboardjsx\";\nimport React, { PropsWithChildren } from \"react\";\nimport { QuizModel } from \"./quiz_model\";\n\nexport interface QuizPreviewProps {\n    quiz: QuizModel,\n    onClick?: React.MouseEventHandler,\n    score: number | null,\n}\n\nconst QuizPreview = (props: PropsWithChildren<QuizPreviewProps>) =>  {\n    let scorePromptClassName: \"Passed\" | \"Failed\" | null = null;\n    if (props.score) {\n        if (props.score === props.quiz.questions.length)\n            scorePromptClassName = \"Passed\";\n        else\n            scorePromptClassName = \"Failed\"\n    }\n\n    const scorePrompt = props.score && scorePromptClassName\n        ? <span className={scorePromptClassName + \" Score\"}>{`${props.score}/${props.quiz.questions.length}`}</span>\n        : null;\n\n    return (\n        <div className=\"QuizPreview\" onClick={props.onClick}>\n            <Chessboard \n                darkSquareStyle={{backgroundColor: \"#929af7\"}}\n                lightSquareStyle={{backgroundColor: \"#e9ebfd\"}}\n                position={props.quiz.initialPosition}\n                width={200}\n                draggable={false}\n            />\n            <h2>{props.quiz.name}</h2>\n            {scorePrompt}\n        </div>\n    )\n};\n\nexport default QuizPreview;","import React, { CSSProperties, useState } from \"react\";\n//import PropTypes from \"prop-types\";\n\n\nimport { ChessInstance } from \"chess.js\";\nimport * as ChessJS from \"chess.js\";\n\nimport Chessboard from \"chessboardjsx\";\nimport * as ChessboardJSX from \"chessboardjsx\";\n//hack - the only way I could get the test and production working\nconst Chess = typeof ChessJS === \"function\" ? ChessJS : ChessJS.Chess;\n\ntype MaybeSquare = ChessJS.Square | null;\n\ninterface BoardState {\n    /**Styles for squares undergoing a drag-drop */\n    dropSquareStyle: ChessboardJSX.Props[\"dropSquareStyle\"],\n    /**Styles to apply to individual squares in render, used for highlighting possible moves and selected squares */\n    squareStyles: ChessboardJSX.Props[\"squareStyles\"],\n    /**The currently selected piece for click-based movement */\n    pieceSquare: MaybeSquare,\n    /**The series of moves made in this game (not stored in state, but passed in for some functions) */\n    history?: ChessJS.Move[]\n}\n\nexport interface BoardProps {\n    /**The board position of the current chess game, in FEN */\n    position: string,\n    /**The ChessInstance used for determining legal moves and store history (passed in as a prop so parent component can manipulate) */\n    game: ChessInstance,\n    /**Callback used when a valid move is made */\n    onValidMove: (move: ChessJS.ShortMove, position: string) => void\n}\n\nconst moveHighlightColor = \"#666cad\";\nconst pieceHighlightColor = \"#a0dfcb\";\n\n//exported to make writing unit tests easier\nexport const highlightMoveStyle = {\n    backgroundImage: `radial-gradient(circle, ${moveHighlightColor} 10%, transparent 30%)`,\n};\n\nexport const highlightCaptureStyle = {\n    boxShadow: `inset 0 0 0 8px ${moveHighlightColor}`,\n    borderRadius: \"50%\",\n};\n\nexport const highlightSquareStyle = { backgroundColor: pieceHighlightColor };\n\nconst InteractiveBoard : React.FC<BoardProps> = (props) => {\n    const [boardState, setBoardState] = useState<BoardState>({\n        dropSquareStyle: {},\n        squareStyles: {},\n        pieceSquare: null,\n    });\n\n    const updateState = (newState: Partial<BoardState>) => setBoardState(oldState => ({...oldState, ...newState}));\n\n    const getHistory = () => props.game.history({verbose: true});\n\n    //given existing state, compute new state that highlights given squares and applies the base squareStyles\n    const styleSquaresAndHighlight = (state: BoardState, squaresToHighlight: MaybeSquare[]) : BoardState => {\n        const highlightMoves: {[id: string]: CSSProperties} = squaresToHighlight\n            .map(square => ({ square, piece: square && props.game.get(square) }))\n            .reduce((a, {square, piece}) => ({\n                ...a,\n                ...(piece && square && {\n                    [square]: {\n                        boxShadow: `inset 0 0 0 8px ${moveHighlightColor}`,\n                        borderRadius: \"50%\",\n                    } \n                }),\n                ...(piece || (square && {\n                    [square]: {\n                        backgroundImage:\n                        `radial-gradient(circle, ${moveHighlightColor} 10%, transparent 30%)`,\n                    }\n                }))\n            }), {});\n        const highlightSquares = getSquareStyles({...state, history: getHistory()});\n\n        //if a square needs both a move highlight AND a square highlight, then we need those style objects together\n        let mergeSquareStyles:  {[id: string]: CSSProperties} = {};\n        for (var key of Object.keys(highlightSquares))\n            if (highlightMoves.hasOwnProperty(key))\n                mergeSquareStyles[key] = { ...highlightMoves[key], ...highlightSquares[key] };\n        mergeSquareStyles = {...highlightMoves, ...highlightSquares, ...mergeSquareStyles};\n        \n        return {\n            ...state,\n            squareStyles: mergeSquareStyles\n        }\n    };\n\n    const highlightMovesFromSquare = (state: BoardState, square?: ChessJS.Square) => {\n        //get possible moves, highlight squares\n        let movesFromSquare = props.game.moves({square: square, verbose: true});\n\n        const moves = (square && movesFromSquare.length && movesFromSquare)\n            || (state.pieceSquare && props.game.moves({square: state.pieceSquare, verbose: true}))\n            || [];\n\n        return styleSquaresAndHighlight(state, moves.map(m => m.to))\n    };\n\n    const removeHighlightedSquare = () => setBoardState(state => highlightMovesFromSquare(state));\n\n    const onMouseOutSquare =  (_square: any) => removeHighlightedSquare();\n\n    //return a new state with the given move made (if legal), or null if the move is illegal\n    const getStateAfterMove = (state: BoardState, move: ChessJS.ShortMove) => {\n\n        if (props.game.move(move))\n        {\n            if (props.onValidMove)\n                props.onValidMove(move, props.game.fen());\n            \n            return {\n                ...state,\n                //position: props.game.fen(),\n                squareStyles: getSquareStyles({...boardState, history: getHistory()}),\n                pieceSquare: null\n            };\n        }\n        \n        return null;\n        \n    };\n    \n    const onDragOverSquare = () => {\n        updateState({dropSquareStyle: { boxShadow: `inset 0 0 1px 4px ${moveHighlightColor}`}});\n    };\n    \n    const onSquareClick = (square: ChessJS.Square) =>\n        setBoardState(state => \n            (state.pieceSquare && getStateAfterMove(state, {from: state.pieceSquare, to: square, promotion: \"q\"}))\n            || { ...highlightMovesFromSquare(state, square), pieceSquare: props.game.get(square) && square }\n        );\n\n    const onSquareRightClick = () => {\n        //TODO\n    };\n\n    \n    return (<Chessboard\n        width={Math.min(window.innerWidth, window.innerHeight) * 0.8}\n        position={props.position}\n        onDrop={({sourceSquare, targetSquare}) => setBoardState(state => getStateAfterMove(state, {from: sourceSquare, to: targetSquare, promotion: \"q\"}) || state)}\n        onMouseOverSquare={(square) => setBoardState(state => highlightMovesFromSquare(state, square))}\n        onMouseOutSquare={onMouseOutSquare}\n        boardStyle={{\n            fontFamily: \"-sans-serif\"\n        }}\n        squareStyles={boardState.squareStyles}\n        dropSquareStyle={boardState.dropSquareStyle}\n        onDragOverSquare={onDragOverSquare}\n        onSquareClick={onSquareClick}\n        onSquareRightClick={onSquareRightClick}\n        darkSquareStyle={{backgroundColor: \"#929af7\"}}\n        lightSquareStyle={{backgroundColor: \"#e9ebfd\"}}\n        \n    />);\n\n}\n\nInteractiveBoard.defaultProps = {\n    position: \"start\",\n    game: new Chess()\n}\n\nexport default InteractiveBoard;\n\nconst getSquareStyles = ({pieceSquare, history}: Required<BoardState>) => {\n    const {from, to} = history.length ? history[history.length - 1] : { from: null, to: null };\n    const highlightStyle = { backgroundColor: pieceHighlightColor };\n\n    \n    return {\n        ...(pieceSquare && {[pieceSquare]: highlightStyle}),\n        ...(from && { [from]: highlightStyle}),\n        ...(to && { [to]: highlightStyle })\n    }\n}","import { PropsWithChildren, useEffect, useReducer, useState } from \"react\";\n\nimport * as ChessJS from \"chess.js\"\nimport InteractiveBoard from \"./interactive_board\";\nimport { QuizModel, viennaGambitAcceptedQuiz } from \"./quiz_model\";\nconst Chess = typeof ChessJS === \"function\" ? ChessJS : ChessJS.Chess;\n\nenum QuizState {\n    AwaitingMove = \"\",\n    Retry = \"Retry\",\n    Next = \"Next\",\n    Complete = \"Finish Quiz\"\n}\n\nexport interface QuizProps {\n    quiz: QuizModel,\n    onFinishQuiz: (score: number) => void,\n}\n\ninterface QuestionViewProps {\n    quiz: QuizModel,\n    questionNumber: number\n}\n\nconst getPrompt = (className: string, title: string, message?: string) =>\n    <li className={className}>\n        <span><h3>{title}</h3>{message}</span>\n    </li>;\n\nconst AskQuestion = (props: QuestionViewProps) =>\n    getPrompt(\"Question\", `Question ${props.questionNumber + 1}`, props.quiz.questions[props.questionNumber].prompt);\n\ninterface ResponseViewProps {\n    message?: string,\n    move: string\n}\n\nconst IncorrectResponse = (props: ResponseViewProps) =>\n    getPrompt(\"Incorrect\", `${props.move} is incorrect`, props.message);\n\nconst CorrectResponse = (props: ResponseViewProps) => \n    getPrompt(\"Correct\", `${props.move} is correct`, props.message);\n\nexport default function QuizView({quiz, onFinishQuiz}: PropsWithChildren<QuizProps>) {\n    \n    let [position, setPosition] = useState(quiz.initialPosition);\n    let [game] = useState(() => new Chess(position));\n    let [questionNumber, incrementQuestionNumBy] = useReducer((state: number, num: number) => state + num, 0);\n\n    useEffect(() => { \n        document.title = quiz.name;\n    });\n\n    let [prompts, addPrompt] = useReducer((oldPrompts: JSX.Element[], newPrompt: JSX.Element) => \n        [...oldPrompts, newPrompt],\n        [<AskQuestion questionNumber={0} quiz={quiz}/>]);\n\n    let [quizState, setQuizState] = useState(QuizState.AwaitingMove);\n\n    let [score, incrementScore] = useReducer((current: number) => current + 1, 0);\n    let [gotQuestionWrong, setGotQuestionWrong] = useState(false);\n    \n    const onValidMove = (move: ChessJS.ShortMove, newPosition: string) => {\n        setPosition(newPosition);\n        \n        const question = quiz.questions[questionNumber];\n        const correctMove = question.correctMove;\n        const history = game.history();\n        const lastMove = history[history.length - 1];\n        if (move.from === correctMove.from && move.to === correctMove.to) {\n            \n            addPrompt(<CorrectResponse move={lastMove} message={question.response}/>);\n\n            if (gotQuestionWrong) setGotQuestionWrong(false);\n            else incrementScore();\n\n            if (questionNumber === quiz.questions.length - 1)\n                setQuizState(QuizState.Complete);\n            else\n                setQuizState(QuizState.Next);\n        }\n        else {\n            setGotQuestionWrong(true);\n            addPrompt(<IncorrectResponse move={lastMove}/>);\n            setQuizState(QuizState.Retry);\n        }\n    };\n\n    const onButtonClick = () => {\n        switch(quizState) {\n            case QuizState.Retry:\n                game.undo();\n                setPosition(game.fen());\n                break;\n            case QuizState.Next:\n                if (quiz.questions[questionNumber].nextMove) {\n                    game.move(quiz.questions[questionNumber].nextMove);\n                    setPosition(game.fen());\n                }\n                addPrompt(<AskQuestion quiz={quiz} questionNumber={questionNumber+1}/>);\n                incrementQuestionNumBy(1);\n                break;\n            case QuizState.Complete:\n                onFinishQuiz(score);\n        }\n\n        setQuizState(QuizState.AwaitingMove);\n    }\n\n    useEffect(() => {\n        let list = document.getElementById(\"quizPromptList\");\n        if (list) list.scrollTop = list.scrollHeight;\n    }, [prompts]);\n\n    return ( \n        <div className=\"Quiz\">\n            <h2>{quiz.name}</h2>\n            <div className=\"QuizBoardAndPrompts\">\n                <div \n                    className=\"Chessboard\"\n                    style={quizState !== QuizState.AwaitingMove ? {pointerEvents: \"none\"} : {}}\n                >\n                    <InteractiveBoard \n                        key={quiz.initialPosition}\n                        position={position} \n                        game={game}\n                        onValidMove={onValidMove}\n                    />\n                </div>\n                <div className=\"PromptContainer\" id=\"quizPromptList\">\n                    <ul className=\"QuizPrompt\">\n                        {prompts} \n                        {quizState === QuizState.Complete && <li><span>{`You scored ${score}/${quiz.questions.length}`}</span></li>}\n                        {(quizState && <button onClick={onButtonClick}>{quizState}</button>)}\n                    </ul>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nQuizView.defaultProps = {\n    quiz: viennaGambitAcceptedQuiz\n}","import { Fragment, PropsWithChildren, useState } from \"react\";\nimport { CourseModel } from \"./course_model\";\nimport { QuizModel } from \"./quiz_model\";\nimport QuizPreview from \"./quiz_preview\";\nimport QuizView from \"./quiz_view\";\n\n\nexport interface CourseViewProps {\n    course: CourseModel\n}\n\nexport default function CourseView({course}: PropsWithChildren<CourseViewProps>) {\n    let [quiz, setQuiz] = useState<QuizModel | null>(null);\n\n    const keyForQuiz = (quiz: QuizModel) => course.name + \"=>\" + quiz?.name;\n\n    if (quiz) {\n        const onFinishQuiz = (finalScore: number) => {\n            quiz && localStorage.setItem(keyForQuiz(quiz), finalScore.toString());\n            setQuiz(null);\n        };\n        return <QuizView quiz={quiz} onFinishQuiz={onFinishQuiz}/>;\n    }\n\n    const scoreForQuiz = (quiz: QuizModel) => {\n        const scoreString = localStorage.getItem(keyForQuiz(quiz));\n        return scoreString ? parseInt(scoreString) : null;\n    };\n\n    return (\n        <Fragment>\n            <h1>{course.name}</h1>\n            <h2>Choose a line to review</h2>\n            <div className=\"CourseView\">\n                {course.lines.map(quiz => \n                    <QuizPreview \n                        quiz={quiz} \n                        onClick={()=>setQuiz(quiz)}\n                        score={scoreForQuiz(quiz)}\n                    />)}\n            </div>\n        </Fragment>\n    )\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ViennaGameCourse } from './course_model';\nimport CourseView from './course_view';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <CourseView course={ViennaGameCourse}/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
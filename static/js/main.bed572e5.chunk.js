(this["webpackJsonpchess-quiz-ts"]=this["webpackJsonpchess-quiz-ts"]||[]).push([[0],{16:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o),c=n(9),i=n.n(c),a=(n(16),n(11)),s=n(3),u=n(4),h=n(5),b=n(1),p=n(10),l=n.n(p),m=n(0),d="function"===typeof u?u:u.Chess,f="#666cad",j="#a0dfcb",O=("radial-gradient(circle, ".concat(f," 10%, transparent 30%)"),"inset 0 0 0 8px ".concat(f),function(e){var t=Object(o.useState)({dropSquareStyle:{},squareStyles:{},pieceSquare:null}),n=Object(s.a)(t,2),r=n[0],c=n[1],i=function(){return e.game.history({verbose:!0})},a=function(t,n){var o=e.game.moves({square:n,verbose:!0});return function(t,n){for(var o=n.map((function(t){return{square:t,piece:t&&e.game.get(t)}})).reduce((function(e,t){var n=t.square,o=t.piece;return Object(b.a)(Object(b.a)(Object(b.a)({},e),o&&n&&Object(h.a)({},n,{boxShadow:"inset 0 0 0 8px ".concat(f),borderRadius:"50%"})),o||n&&Object(h.a)({},n,{backgroundImage:"radial-gradient(circle, ".concat(f," 10%, transparent 30%)")}))}),{}),r=q(Object(b.a)(Object(b.a)({},t),{},{history:i()})),c={},a=0,s=Object.keys(r);a<s.length;a++){var u=s[a];o.hasOwnProperty(u)&&(c[u]=Object(b.a)(Object(b.a)({},o[u]),r[u]))}return c=Object(b.a)(Object(b.a)(Object(b.a)({},o),r),c),Object(b.a)(Object(b.a)({},t),{},{squareStyles:c})}(t,(n&&o.length&&o||t.pieceSquare&&e.game.moves({square:t.pieceSquare,verbose:!0})||[]).map((function(e){return e.to})))},u=function(t,n){return e.game.move(n)?(e.onValidMove&&e.onValidMove(n,e.game.fen()),Object(b.a)(Object(b.a)({},t),{},{squareStyles:q(Object(b.a)(Object(b.a)({},r),{},{history:i()})),pieceSquare:null})):null};return Object(m.jsx)(l.a,{width:.8*Math.min(window.innerWidth,window.innerHeight),position:e.position,onDrop:function(e){var t=e.sourceSquare,n=e.targetSquare;return c((function(e){return u(e,{from:t,to:n,promotion:"q"})||e}))},onMouseOverSquare:function(e){return c((function(t){return a(t,e)}))},onMouseOutSquare:function(e){return c((function(e){return a(e)}))},boardStyle:{fontFamily:"-sans-serif"},squareStyles:r.squareStyles,dropSquareStyle:r.dropSquareStyle,onDragOverSquare:function(){var e;e={dropSquareStyle:{boxShadow:"inset 0 0 1px 4px ".concat(f)}},c((function(t){return Object(b.a)(Object(b.a)({},t),e)}))},onSquareClick:function(t){return c((function(n){return n.pieceSquare&&u(n,{from:n.pieceSquare,to:t,promotion:"q"})||Object(b.a)(Object(b.a)({},a(n,t)),{},{pieceSquare:e.game.get(t)&&t})}))},onSquareRightClick:function(){},darkSquareStyle:{backgroundColor:"#929af7"},lightSquareStyle:{backgroundColor:"#e9ebfd"}})});O.defaultProps={position:"start",game:new d};var g,v=O,q=function(e){var t=e.pieceSquare,n=e.history,o=n.length?n[n.length-1]:{from:null,to:null},r=o.from,c=o.to,i={backgroundColor:j};return Object(b.a)(Object(b.a)(Object(b.a)({},t&&Object(h.a)({},t,i)),r&&Object(h.a)({},r,i)),c&&Object(h.a)({},c,i))},w="function"===typeof u?u:u.Chess;!function(e){e.AwaitingMove="",e.Retry="Retry",e.Next="Next",e.Complete="Finish Quiz"}(g||(g={}));var S=function(e,t,n){return Object(m.jsx)("li",{className:e,children:Object(m.jsxs)("span",{children:[Object(m.jsx)("h3",{children:t}),n]})})},y=function(e){return S("Question","Question ".concat(e.questionNumber+1),e.quiz.questions[e.questionNumber].prompt)},x=function(e){return S("Incorrect","".concat(e.move," is incorrect"),e.message)},k=function(e){return S("Correct","".concat(e.move," is correct"),e.message)};function M(e){var t=e.quiz,n=Object(o.useState)(t.initialPosition),r=Object(s.a)(n,2),c=r[0],i=r[1],u=Object(o.useState)((function(){return new w(c)})),h=Object(s.a)(u,1)[0],b=Object(o.useReducer)((function(e,t){return e+t}),0),p=Object(s.a)(b,2),l=p[0],d=p[1];Object(o.useEffect)((function(){document.title=t.name}));var f=Object(o.useReducer)((function(e,t){return[].concat(Object(a.a)(e),[t])}),[Object(m.jsx)(y,{questionNumber:0,quiz:t})]),j=Object(s.a)(f,2),O=j[0],q=j[1],S=Object(o.useState)(g.AwaitingMove),M=Object(s.a)(S,2),P=M[0],C=M[1],N=Object(o.useReducer)((function(e){return e+1}),0),z=Object(s.a)(N,2),R=z[0],B=z[1],Q=Object(o.useState)(!1),T=Object(s.a)(Q,2),F=T[0],A=T[1];return Object(o.useEffect)((function(){var e=document.getElementById("quizPromptList");e&&(e.scrollTop=e.scrollHeight)}),[O]),Object(m.jsxs)("div",{className:"Quiz",children:[Object(m.jsx)("h2",{children:t.name}),Object(m.jsxs)("div",{className:"QuizBoardAndPrompts",children:[Object(m.jsx)("div",{className:"Chessboard",style:P!==g.AwaitingMove?{pointerEvents:"none"}:{},children:Object(m.jsx)(v,{position:c,game:h,onValidMove:function(e,n){i(n);var o=t.questions[l],r=o.correctMove,c=h.history(),a=c[c.length-1];e.from===r.from&&e.to===r.to?(q(Object(m.jsx)(k,{move:a,message:o.response})),F?A(!1):B(),l===t.questions.length-1?C(g.Complete):C(g.Next)):(A(!0),q(Object(m.jsx)(x,{move:a})),C(g.Retry))}},t.initialPosition)}),Object(m.jsx)("div",{className:"PromptContainer",id:"quizPromptList",children:Object(m.jsxs)("ul",{className:"QuizPrompt",children:[O,P===g.Complete&&Object(m.jsx)("li",{children:Object(m.jsx)("span",{children:"You scored ".concat(R,"/").concat(t.questions.length)})}),P&&Object(m.jsx)("button",{onClick:function(){switch(P){case g.Retry:h.undo(),i(h.fen());break;case g.Next:t.questions[l].nextMove&&(h.move(t.questions[l].nextMove),i(h.fen())),q(Object(m.jsx)(y,{quiz:t,questionNumber:l+1})),d(1);case g.Complete:}C(g.AwaitingMove)},children:P})]})})]})]})}M.defaultProps={quiz:{name:"Vienna Gambit Accepted",initialPosition:"rnbqkb1r/pppp1ppp/5n2/4p3/4P3/2N5/PPPP1PPP/R1BQKBNR w KQkq - 2 3",questions:[{prompt:"The Vienna Gambit begins with what move in this position?",correctMove:{from:"f2",to:"f4"},response:"White gambits the f pawn",nextMove:{from:"e5",to:"f4"}},{prompt:"Suppose black accepts the gambit, what is white's best response? (Hint: why is this position better than the King's Gambit?)",correctMove:{from:"e4",to:"e5"},response:"White takes space in the centre while gaining tempo by attacking the knight. Note that the knight cannot move forward.",nextMove:{from:"d8",to:"e7"}},{prompt:"Black could try and be clever, pinning your pawn. How can white maintain pressure on the knight?",correctMove:{from:"d1",to:"e2"},response:"This unpins the pawn while developing the queen. Black's knight must now retreat.",nextMove:{from:"f6",to:"g8"}},{prompt:"Now the knight has undeveloped, what's the most accurate continuation for white?",correctMove:{from:"g1",to:"f3"},response:"This defends against Qh4 check, which is particularly nasty because of the pawn on f4.",nextMove:{from:"d7",to:"d6"}},{prompt:"A common idea here is for black to attack your e pawn. How can white punish this?",correctMove:{from:"c3",to:"d5"},response:"This attacks both the queen and the c7 pawn. If the queen goes to e6, then we have a royal fork.",nextMove:{from:"e7",to:"d7"}},{prompt:"Suppose black's queen instead tries to maintain vision on the d7 pawn. Find the winning continuation.",correctMove:{from:"d5",to:"c7"},response:"This forks the king and rook, and the square is only defended by the queen.",nextMove:{from:"d7",to:"c7"}},{prompt:"Finally, what if the queen recaptures the knight?",correctMove:{from:"e5",to:"d6"},response:"This is a discover check that attacks both the king and queen. Black's position crumbles.",nextMove:{from:"e7",to:"d7"}}]}};var P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),o(e),r(e),c(e),i(e)}))};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(M,{})}),document.getElementById("root")),P()}},[[21,1,2]]]);
//# sourceMappingURL=main.bed572e5.chunk.js.map
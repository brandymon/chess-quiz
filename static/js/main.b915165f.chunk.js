(this["webpackJsonpchess-quiz-ts"]=this["webpackJsonpchess-quiz-ts"]||[]).push([[0],{16:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(9),a=n.n(i),c=(n(16),n(11)),s=n(3),u=n(4),p=n(5),h=n(0),b=n(10),l=n.n(b),f=n(2),d="function"===typeof u?u:u.Chess,m=function(e){var t=Object(o.useState)({dropSquareStyle:{},squareStyles:{},pieceSquare:null,square:null}),n=Object(s.a)(t,2),r=n[0],i=n[1],a=function(){return e.game.history({verbose:!0})},c=function(t,n){var o=e.game.moves({square:n,verbose:!0});return function(t,n){var o=n.map((function(t){return{square:t,piece:t&&e.game.get(t)}})).reduce((function(e,t){var n=t.square,o=t.piece;return Object(h.a)(Object(h.a)(Object(h.a)({},e),o&&n&&Object(p.a)({},n,{boxShadow:"inset 0 0 0 5px rgb(175, 160, 143)",borderRadius:"50%"})),o||n&&Object(p.a)({},n,{background:"radial-gradient(circle, rgb(175, 160, 143) 10%, transparent 30%)",borderRadius:"20%"}))}),{});return Object(h.a)(Object(h.a)({},t),{},{squareStyles:Object(h.a)(Object(h.a)({},O(Object(h.a)(Object(h.a)({},t),{},{history:a()}))),o)})}(t,(n&&o.length&&o||t.pieceSquare&&e.game.moves({square:t.pieceSquare,verbose:!0})||[]).map((function(e){return e.to})))},u=function(t,n){return e.game.move(n)?(e.onValidMove&&e.onValidMove(n,e.game.fen()),Object(h.a)(Object(h.a)({},t),{},{squareStyles:O(Object(h.a)(Object(h.a)({},r),{},{history:a()})),pieceSquare:null})):null};return Object(f.jsx)(l.a,{position:e.position,onDrop:function(e){var t=e.sourceSquare,n=e.targetSquare;return i((function(e){return u(e,{from:t,to:n,promotion:"q"})||e}))},onMouseOverSquare:function(e){return i((function(t){return c(t,e)}))},onMouseOutSquare:function(e){return i((function(e){return c(e)}))},boardStyle:{borderRadius:"5px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.5)"},squareStyles:r.squareStyles,dropSquareStyle:r.dropSquareStyle,onDragOverSquare:function(){var e;e={dropSquareStyle:{boxShadow:"inset 0 0 1px 4px rgb(175, 160, 143)"}},i((function(t){return Object(h.a)(Object(h.a)({},t),e)}))},onSquareClick:function(t){return i((function(n){return n.pieceSquare&&u(n,{from:n.pieceSquare,to:t,promotion:"q"})||Object(h.a)(Object(h.a)({},c(n,t)),{},{pieceSquare:e.game.get(t)&&t})}))},onSquareRightClick:function(){}})};m.defaultProps={position:"start",game:new d};var j,g=m,O=function(e){var t=e.pieceSquare,n=e.history,o=n.length?n[n.length-1]:{from:null,to:null},r=o.from,i=o.to,a={backgroundColor:"rgba(255, 255, 0, 0.4)"};return Object(h.a)(Object(h.a)(Object(h.a)({},t&&Object(p.a)({},t,a)),r&&Object(p.a)({},r,a)),i&&Object(p.a)({},i,a))},v="function"===typeof u?u:u.Chess;function q(e){var t=e.quiz,n=Object(o.useState)(t.initialPosition),r=Object(s.a)(n,2),i=r[0],a=r[1],u=Object(o.useState)((function(){return new v(i)})),p=Object(s.a)(u,1)[0],h=Object(o.useReducer)((function(e,t){return e+t}),0),b=Object(s.a)(h,2),l=b[0],d=b[1];Object(o.useEffect)((function(){document.title=t.name}));var m=Object(o.useReducer)((function(e,t){return[].concat(Object(c.a)(e),[t])}),[t.questions[0].prompt]),O=Object(s.a)(m,2),q=O[0],S=O[1],w=Object(o.useState)(j.AwaitingMove),y=Object(s.a)(w,2),x=y[0],k=y[1],M=Object(o.useReducer)((function(e){return e+1}),0),P=Object(s.a)(M,2),C=P[0],R=P[1],F=Object(o.useState)(!1),N=Object(s.a)(F,2),T=N[0],B=N[1];return Object(f.jsxs)(o.Fragment,{children:[Object(f.jsx)("h1",{children:t.name}),Object(f.jsxs)("div",{style:{display:"flex"},children:[Object(f.jsx)("div",{style:x!==j.AwaitingMove?{pointerEvents:"none"}:{},children:Object(f.jsx)(g,{position:i,game:p,onValidMove:function(e,n){a(n);var o=t.questions[l],r=o.correctMove,i=p.history(),c=i[i.length-1];e.from===r.from&&e.to===r.to?(S("".concat(c," is correct. ").concat(o.response)),T?B(!1):R(),l===t.questions.length-1?k(j.Complete):k(j.Next)):(B(!0),S("".concat(c," is incorrect")),k(j.Retry))}},t.initialPosition)}),Object(f.jsxs)("ul",{children:[q.map((function(e,t){return Object(f.jsx)("li",{children:e},t)})),x===j.Complete&&Object(f.jsx)("li",{children:"You scored ".concat(C,"/").concat(t.questions.length)}),x&&Object(f.jsx)("li",{children:Object(f.jsx)("button",{onClick:function(){switch(x){case j.Retry:p.undo(),a(p.fen());break;case j.Next:t.questions[l].nextMove&&(p.move(t.questions[l].nextMove),a(p.fen())),S(t.questions[l+1].prompt),d(1);case j.Complete:}k(j.AwaitingMove)},children:x})},"retry")]})]})]})}!function(e){e.AwaitingMove="",e.Retry="Retry",e.Next="Next",e.Complete="Finish Quiz"}(j||(j={})),q.defaultProps={quiz:{name:"Vienna Gambit Accepted",initialPosition:"rnbqkb1r/pppp1ppp/5n2/4p3/4P3/2N5/PPPP1PPP/R1BQKBNR w KQkq - 2 3",questions:[{prompt:"The Vienna Gambit begins with what move in this position?",correctMove:{from:"f2",to:"f4"},response:"White gambits the f pawn",nextMove:{from:"e5",to:"f4"}},{prompt:"Suppose black accepts the gambit, what is white's best response? (Hint: why is this position better than the King's Gambit?)",correctMove:{from:"e4",to:"e5"},response:"White takes space in the centre while gaining tempo by attacking the knight. Note that the knight cannot move forward.",nextMove:{from:"d8",to:"e7"}},{prompt:"Black could try and be clever, pinning your pawn. How can white maintain pressure on the knight?",correctMove:{from:"d1",to:"e2"},response:"This unpins the pawn while developing the queen. Black's knight must now retreat.",nextMove:{from:"f6",to:"g8"}},{prompt:"Now the knight has undeveloped, what's the most accurate continuation for white?",correctMove:{from:"g1",to:"f3"},response:"This defends against Qh4 check, which is particularly nasty because of the pawn on f4.",nextMove:{from:"d7",to:"d6"}},{prompt:"A common idea here is for black to attack your e pawn. How can white punish this?",correctMove:{from:"c3",to:"d5"},response:"This attacks both the queen and the c7 pawn. If the queen goes to e6, then we have a royal fork.",nextMove:{from:"e7",to:"d7"}},{prompt:"Suppose black's queen instead tries to maintain vision on the d7 pawn. Find the winning continuation.",correctMove:{from:"d5",to:"c7"},response:"This forks the king and rook, and the square is only defended by the queen.",nextMove:{from:"d7",to:"c7"}},{prompt:"Finally, what if the queen recaptures the knight?",correctMove:{from:"e5",to:"d6"},response:"This is a discover check that attacks both the king and queen. Black's position crumbles.",nextMove:{from:"e7",to:"d7"}}]}};var S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),o(e),r(e),i(e),a(e)}))};a.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(q,{})}),document.getElementById("root")),S()}},[[21,1,2]]]);
//# sourceMappingURL=main.b915165f.chunk.js.map